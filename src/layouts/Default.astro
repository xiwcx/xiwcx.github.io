---
import FormTheme from "../components/Theme/FormTheme.astro";
import Logo from "../components/Logo.astro";
import Posthog from "../components/Posthog.astro";
import { cloudinaryClient } from "../utils/cloudinary";

export interface Props {
  articleTitle?: string;
}

const { articleTitle } = Astro.props;
const siteTitle = "i. welch canavan";
const title = articleTitle ? `${articleTitle} | ${siteTitle}` : siteTitle;
const isArticle = articleTitle !== undefined;

const defaultOGImage = await cloudinaryClient.url("themed-logo-dark-pink", {
  width: 1200,
  height: 630,
  crop: "fill",
});
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />

    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link
      href="https://api.fontshare.com/v2/css?f[]=crimson-pro@1,2&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="https://use.typekit.net/tdw5rhu.css" />
    <link rel="stylesheet" href="/styles/main.css" />
    <link
      rel="alternate"
      type="application/rss+xml"
      title={siteTitle}
      href={new URL("rss.xml", Astro.site)}
    />

    <meta name="color-scheme" content="dark light" />
    <meta name="generator" content={Astro.generator} />
    <meta property="og:title" content={isArticle ? articleTitle : siteTitle} />
    <meta property="og:type" content={isArticle ? "article" : "website"} />
    <meta property="og:url" content={new URL(Astro.url.pathname, Astro.site)} />
    <meta property="og:image" content={defaultOGImage} />

    <title>{title}</title>

    <script is:inline>
      const theme = localStorage.getItem("theme") || "system";

      const colorScheme = {
        system: "light dark",
        light: "light",
        dark: "dark",
      };

      document.documentElement.style.colorScheme = colorScheme[theme];
    </script>
    <Posthog />
  </head>

  <body>
    <header>
      <nav>
        <ul>
          <li class="title-container">
            <a href="/" class="title">
              <Logo svgProps={{ class: "logo" }} />
              <h1>i. welch canavan</h1>
            </a>
          </li>
          <li>
            <a href="https://github.com/xiwcx">GitHub</a>
          </li>
          <li>
            <a href="https://www.linkedin.com/in/welchcanavan/">LinkedIn</a>
          </li>
          <li>
            <a href="https://bsky.app/profile/xiwcx.bsky.social">Bluesky</a>
          </li>
        </ul>
      </nav>
    </header>

    <main>
      <slot />
    </main>

    <footer class="footer">
      <FormTheme />

      <p>Â© 2024 Welch Canavan</p>
    </footer>
  </body><style>
    header {
      .title-container {
        width: 100%;

        @media (min-width: 500px) {
          flex-grow: 1;
          width: auto;
        }
      }
      nav {
        ul {
          align-items: center;
          display: flex;
          flex-wrap: wrap;
          gap: 1em;
          list-style-type: none;
          margin: 0;
          padding: 0;

          li:first-child {
            font-variation-settings: "wght" 500;

            a {
              text-decoration: none;
            }
          }
        }
      }
    }
  </style>
</html>
